<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BuiltByBrandon Virtual Gallery</title>
<style>
  body { font-family: monospace; background: #111; color: #eee; padding: 20px; }
  #output { white-space: pre-wrap; background: #222; padding: 15px; max-height: 500px; overflow-y: auto; border-radius: 8px;}
  button { margin: 5px; padding: 5px 10px; font-size: 1rem; }
  input, textarea { font-size: 1rem; margin: 3px; width: 300px; display: block; }
  #secret-form { display: none; background: #222; padding: 10px; border-radius: 8px; margin-top: 10px; }
</style>
</head>
<body>

<h1>ðŸŒŒ BuiltByBrandon Virtual Gallery ðŸŒŒ</h1>
<div id="output"></div>

<div id="controls">
    <div id="move-buttons"></div>
    <div id="examine-buttons"></div>
    <div id="secret-form">
        <h3>âœ¨ Secret Room Entry âœ¨</h3>
        <form action="https://formspree.io/f/myzpaeyl" method="POST" target="_blank">
            <label>
                Name:<br>
                <input type="text" name="name" required>
            </label>
            <label>
                Email:<br>
                <input type="email" name="email" required>
            </label>
            <label>
                Mini-Website Idea:<br>
                <textarea name="idea" required></textarea>
            </label>
            <button type="submit">Submit Entry</button>
        </form>
    </div>
</div>

<script>
const output = document.getElementById("output");
function write(text){ output.innerText += text + "\n"; output.scrollTop = output.scrollHeight; }

const player = {
    current_room: "lobby",
    visited_rooms: new Set(),
    inventory: [],
    secret_items_found: [],
    secrets_found: []
};

const ROOMS = {
    "lobby": {"N":"photo_room","S":"sculpture_room","E":"abstract_room","W":"dark_room"},
    "photo_room": {"S":"lobby","N":"flower_room"},
    "flower_room": {"S":"photo_room"},
    "sculpture_room": {"N":"lobby","S":"space_room"},
    "space_room": {"N":"sculpture_room"},
    "abstract_room": {"W":"lobby","E":"mirror_room"},
    "mirror_room": {"W":"abstract_room"},
    "dark_room": {"E":"lobby","W":"trap_room"},
    "trap_room": {"E":"dark_room"},
    "secret_room": {}
};

const MAIN_ROOMS = ["lobby","photo_room","flower_room","sculpture_room","space_room","abstract_room","mirror_room","dark_room"];
const ROOM_ITEMS = {
    "photo_room":["photo"], "flower_room":["flower"], "sculpture_room":["sculpture"], 
    "space_room":["space","frame"], "abstract_room":["abstract"], "mirror_room":["mirror"], 
    "dark_room":["dark"], "trap_room":["decoy_art"]
};

const ART_PIECES = {
    "photo": "A stunning photograph of an abandoned city at dusk. The colors bleed into the shadows, and you swear you see movement in the distance.",
    "flower": "A delicate bloom hovers mid-air, petals trembling as if alive. A faint whisper seems to emanate from its center.",
    "sculpture": "A twisting metal sculpture reflects the gallery lights in eerie, almost impossible angles. Touching it feels like grasping at air.",
    "space": "A cosmic diorama of stars and planets, suspended above you. Tiny meteorites orbit as if mocking your presence.",
    "frame": "An empty frame that somehow feels full. You almost want to step inside itâ€¦",
    "abstract": "A swirling canvas of colors that almost forms a shape, but it constantly slips away from perception. The edges seem to shift when unobserved.",
    "mirror": "Your reflection stretches and warps unnaturally. It feels aware, studying your every move.",
    "dark": "Shadows coil along the walls and floor. Something moves just beyond your sight. The gallery is watching.",
    "decoy_art": "A suspicious piece of art labeled 'We Hope You Enjoy Your Stayâ€¦'. Approaching it sends a shiver down your spine and instantly returns you to the lobby."
};

const WHISPERS = [
    "â€¦Did you hear that?", "â€¦The gallery knows your nameâ€¦",
    "â€¦Careful where you stepâ€¦", "â€¦Not all doors lead outâ€¦",
    "â€¦Look closerâ€¦ or risk missing itâ€¦", "â€¦The walls rememberâ€¦"
];

function show_room(){
    const room = player.current_room;
    player.visited_rooms.add(room);
    write(`\nYou are in ${room.replace('_',' ').toUpperCase()}`);
    write(`This room feels ${Math.random()<0.33?"alive":"silent"}.`);
}

function move(to_room){
    if(Math.random()<0.1) {
        to_room = "trap_room";
        write("ðŸ’€ You are suddenly sent to a trap room!");
    } else if(Math.random()<0.1){
        const options = Object.values(ROOMS[player.current_room]).filter(r=>r!==to_room);
        if(options.length>0){
            to_room = options[Math.floor(Math.random()*options.length)];
            write("The gallery twistsâ€¦ you end up somewhere unexpected.");
        }
    }
    player.current_room = to_room;
    show_room();
    check_secret_room_unlock();
    update_controls();
}

function examine(item){
    if(item==="decoy_art"){
        write("ðŸ’€ 'We hope you enjoy your stayâ€¦' You are sent back to the lobby.");
        player.current_room = "lobby";
        show_room();
    } else {
        write(ART_PIECES[item] || "Mysterious objectâ€¦");
        if(!player.inventory.includes(item)) player.inventory.push(item);
        if(!player.secret_items_found.includes(item)) player.secret_items_found.push(item);
    }
    update_controls();
}

function check_secret_room_unlock(){
    if(MAIN_ROOMS.every(r=>player.visited_rooms.has(r)) && !player.secrets_found.includes("secret_room")){
        write("\nðŸ’¡ A hidden passage reveals itselfâ€¦ secret room unlocked!");
        player.current_room = "secret_room";
        write("âœ¨ SECRET ROOM âœ¨");
        document.getElementById("secret-form").style.display="block";
        player.secrets_found.push("secret_room");
    }
}

function update_controls(){
    const move_div = document.getElementById("move-buttons");
    const examine_div = document.getElementById("examine-buttons");
    move_div.innerHTML = "";
    examine_div.innerHTML = "";

    const exits = ROOMS[player.current_room] || {};
    for(let dir in exits){
        const btn = document.createElement("button");
        btn.innerText = `${dir.toUpperCase()} â†’ ${exits[dir].replace('_',' ').toUpperCase()}`;
        btn.onclick = ()=> move(exits[dir]);
        move_div.appendChild(btn);
    }

    const items = ROOM_ITEMS[player.current_room] || [];
    items.forEach(it=>{
        const btn = document.createElement("button");
        btn.innerText = it.replace('_',' ').toUpperCase();
        btn.onclick = ()=> examine(it);
        examine_div.appendChild(btn);
    });
}

// Random whispers
setInterval(()=>{ write(WHISPERS[Math.floor(Math.random()*WHISPERS.length)]); }, 7000);

// Start the game
write("Welcome to the BuiltByBrandon Virtual Gallery!");
show_room();
update_controls();
</script>

</body>
</html>
